<kt-portlet>
	<kt-portlet-body>
		<!--begin: Wizard -->
		<div #wizard class="kt-grid kt-wizard-v3 kt-wizard-v3--white" id="kt_wizard_v3" data-ktwizard-state="step-first">
			<div class="kt-grid__item">
				<!--begin: Form Wizard Nav -->
				<div class="kt-wizard-v3__nav">
					<div class="kt-wizard-v3__nav-items">
						<a class="kt-wizard-v3__nav-item" href="javascript:;" data-ktwizard-type="step" data-ktwizard-state="current">
							<div class="kt-wizard-v3__nav-body">
								<div class="kt-wizard-v3__nav-label">
									<span>1</span>Evaluation
								</div>
								<div class="kt-wizard-v3__nav-bar"></div>
							</div>
						</a>
						<a class="kt-wizard-v3__nav-item" href="javascript:;" data-ktwizard-type="step">
							<div class="kt-wizard-v3__nav-body">
								<div class="kt-wizard-v3__nav-label">
									<span>2</span> Fixation des nouveaux objectifs
								</div>
								<div class="kt-wizard-v3__nav-bar"></div>
							</div>
						</a>
						<a class="kt-wizard-v3__nav-item" href="javascript:;" data-ktwizard-type="step">
							<div class="kt-wizard-v3__nav-body">
								<div class="kt-wizard-v3__nav-label">
									<span>3</span> Evaluation des compétences
								</div>
								<div class="kt-wizard-v3__nav-bar"></div>
							</div>
						</a>
						<a class="kt-wizard-v3__nav-item" href="javascript:;" data-ktwizard-type="step">
							<div class="kt-wizard-v3__nav-body">
								<div class="kt-wizard-v3__nav-label">
									<span>4</span> Projet Professionel
								</div>
								<div class="kt-wizard-v3__nav-bar"></div>
							</div>
						</a>
						<a class="kt-wizard-v3__nav-item" href="javascript:;" data-ktwizard-type="step">
							<div class="kt-wizard-v3__nav-body">
								<div class="kt-wizard-v3__nav-label">
									<span>5</span> Clôture
								</div>
								<div class="kt-wizard-v3__nav-bar"></div>
							</div>
						</a>
					</div>
				</div>
				<!--end: Form Wizard Nav -->
			</div>
			<div [hidden]="!message" class="alert alert-{{type}}" role="alert" #alertNotice>
				<div class="alert-text" [innerHTML]="message"></div>
			</div>
			<div class="kt-grid__item kt-grid__item--fluid kt-wizard-v3__wrapper">
				<!--begin: Form Wizard Form-->
				<div class="kt-form" id="kt_form">
					<!--begin: Form Wizard Step 1-->
					<div class="kt-wizard-v3__content" data-ktwizard-type="step-content" data-ktwizard-state="current">
						<div class="kt-form__section kt-form__section--first">
							<div class="kt-wizard-v3__form">
								<div class="row" *ngIf="collaborateur">
									<div class="col-lg-12 grid-margin stretch-card">
										<div class="kt-heading kt-heading--md">Informations génerales sur le Collaborateur :</div>
									</div>

									<div class="col-xl-3">
										<div class="form-group">
											<label>Fullname :</label>
										</div>
									</div>
									<div class="col-xl-3">
										<div class="form-group">
											<mark>{{collaborateur.fullname}}</mark>
										</div>
									</div>
									<div class="col-xl-3">
										<div class="form-group">
											<label>Email : </label>
										</div>
									</div>
									<div class="col-xl-3">
										<div class="form-group">
											<mark>{{collaborateur.email}}</mark>
										</div>
									</div>
									<div class="col-xl-3">
										<div class="form-group">
											<label>Date Intégration :</label>
										</div>
									</div>
									<div class="col-xl-3">
										<div class="form-group">
											<mark>{{collaborateur.dateIntegration}}</mark>
										</div>
									</div>
									<div class="col-xl-3">
										<div class="form-group">
											<label>Matricule :</label>
										</div>
									</div>
									<div class="col-xl-3">
										<div class="form-group">
											<mark>{{collaborateur.matricule}}</mark>
										</div>
									</div>
								</div>
								<br><br>

								<div class="row" *ngIf="collaborateur">
									<div class="col-lg-12 grid-margin stretch-card">
										<div class="card">
											<div class="card-body">
												<h4 class="card-title text-center">Evaluation des objectifs
												</h4>
												<br><br>
												<div class="table-responsive">
													<table id="mytable" class="table table-striped table-hover">
														<thead>
															<tr>
																<th>
																	Objectif
																</th>
																<th>
																	Evaluation
																</th>
																<th>
																	Commentaire
																</th>
															</tr>
														</thead>
														<tbody>
															<tr *ngFor="let objectif of objectifs ; let i = index">
																<td>
																	{{objectif.designation}}
																</td>
																<td>
																	<select (change)="change(objectif)" class="form-control" name="autoEvaluation" [(ngModel)]="objectif.autoEvaluation">
																		<option value={{objectif.autoEvaluation}} selected>
																			{{objectif.autoEvaluation}}</option>
																		<option value="Performance à amelioré">Performance à
																			ameliore</option>
																		<option value="Zone de conformite">Zone de
																			conformite</option>
																		<option value="Objectif dépassé">Objectif
																			dépassé</option>
																		<option value="Performance exceptionnelle">
																			Performance exceptionnelle </option>
																	</select>
																</td>
																<td>
																	<textarea (change)="change(objectif)" class="form-control" placeholder="commentaire" name="commentaire" [(ngModel)]="objectif.commentaire">
																	</textarea>
																</td>
															</tr>
														</tbody>
													</table>
													<mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
												</div>
											</div>
										</div>
									</div>
								</div>

								<br><br>

							</div>
						</div>
					</div>
					<!--end: Form Wizard Step 1-->


					<!--begin: Form Wizard Step 2-->
					<div class="kt-wizard-v3__content" data-ktwizard-type="step-content">


						<div *ngIf="collaborateur && savedObjectifs.length > 0" class="kt-heading kt-heading--md">Objectifs assignés : </div>
						<div class="kt-form__section kt-form__section--first">
							<div class="kt-wizard-v3__form">
								<div class="form-group">
									<div *ngFor="let savedObjectif of savedObjectifs">
										<label>Objectif Designation</label>
										<textarea class="form-control" placeholder="designation" [disabled]="true" name="savedObjectif" [(ngModel)]="savedObjectif.designation">
											</textarea>
										<button (click)="deleteSavedObjectif(savedObjectif)" [hidden]="savedObjectifs.length == 0" style="float:right" mat-raised-button>Supprimer
											<span class="material-icons">clear</span></button>
										<br><br>
									</div>
								</div>
							</div>
						</div>

						<div *ngIf="collaborateur" class="kt-heading kt-heading--md">Ajouter des nouveaux objectifs pour {{collaborateur.username}} </div>
						<div class="kt-form__section kt-form__section--first">
							<div class="kt-wizard-v3__form">
								<div class="form-group">
									<div *ngFor="let objectif of newObjectifList">
										<label>Objectif Designation</label>
										<textarea (change)="addNew(objectif)" class="form-control" placeholder="designation" name="designation" [(ngModel)]="objectif.designation">
											</textarea>
										<span class="form-text text-muted">Entrez un nouveau objectif svp.</span>
										<br><br>
									</div>
									<button (click)="showOneLess()" [hidden]="index == 1" style="float:right" mat-raised-button>Supprimer
										<span class="material-icons">clear</span></button>
									<button (click)="showOneMore()" style="float:right" mat-raised-button color="warn">Ajouter un autre
										<span class="material-icons">add</span></button>
								</div>
							</div>
						</div>



					</div>
					<!--end: Form Wizard Step 2-->

					<!--begin: Form Wizard Step 3-->
					<div class="kt-wizard-v3__content" data-ktwizard-type="step-content">
						<!-- <div class="kt-heading kt-heading--md">Evaluation des competences</div> -->
						<div class="kt-form__section kt-form__section--first">
							<div class="kt-wizard-v3__form">
								<div class="row">
									<div class="col-lg-12 grid-margin stretch-card">
										<div class="card">
											<div class="card-body">
												<h4 class="card-title text-center">Evaluation des competences
												</h4>
												<br><br>
												<div class="table-responsive">
													<table id="mytable" class="table table-striped table-hover">
														<thead>
															<tr>
																<th>
																	Designation
																</th>
																<th>
																	Définition
																</th>
																<th>
																	outils d'évaluation
																</th>
																<th>
																	Niveau
																</th>
															</tr>
														</thead>
														<tbody>
															<tr *ngFor="let competence of competences">
																<td>
																	{{competence.designation}}
																</td>
																<td>
																	{{competence.definition}}
																</td>
																<td>
																	{{competence.outilsEvaluation}}
																</td>
																<td (click)="updateLevels(competence)">
																	<mat-form-field>
																		<mat-label>choisir un niveau </mat-label>
																		<mat-select (selectionChange)="saveCompetenceEvaluations(competence,$event.value)">
																		  <mat-option *ngFor="let niveau of niveaux" [value]="niveau.id" 
																		  matTooltip={{niveau.designation}} 
																		  matTooltipPosition="right"
																		  matTooltipClass="custom-tooltip">
																		{{ niveau.id }}
																		  </mat-option>
																		</mat-select>
																	</mat-form-field>
																</td>
															</tr>
														</tbody>
													</table>
													<mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!--end: Form Wizard Step 3-->

					<!--begin: Form Actions -->
					<div class="kt-form__actions">
						<div data-ktwizard-type="action-prev">
							<td><button (click)="retour()" class="btn btn-secondary btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u">Retour
								</button></td>
						</div>
						<div (click)="onSubmit()" class="btn btn-success btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u" data-ktwizard-type="action-submit">
							Valider
						</div>
						<div data-ktwizard-type="action-next">
							<td><button [disabled]="autoEvaluation && stepNumber ==1 ||  
													objectifFlag && stepNumber==2 || 
													objectifFlag && !newObjectifFixed && stepNumber==2 || 
													stepNumber==3 && !evaluationCompetence"
										(click)="suivant()" class="btn btn-brand btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u">
									Suivant
								</button></td>
						</div>
					</div>
					<!--end: Form Actions -->
				</div>
				<!--end: Form Wizard Form-->
			</div>
		</div>
		<!--end: Wizard -->

	</kt-portlet-body>
</kt-portlet>
